<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>BuildingSpriteNormal</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//creation code for buildings
//when an instances are created, each instance will run the following code

if(room == RoomMap )//if the room is the map screen
{
    Building.depth = 2;
    ref = string(global.objectRef); //set the ref variable to the current objectRef (instance number)
    Name = "Location"+ref; //sets "Location+currentID" to the name variable as a string, this is used when accessing the location in the ini file
}
if(room == RoomLocationAdd)
{
    Building.x = global.roomWidth/5*3;//set the current position on screen
    Building.y = global.roomHeight/5+125;
    Building.depth = 2;
    ref = string(global.objectRef); 
    Name = "Location"+global.tempID; //set Name to "Location+currentID"
}
if(room == RoomSprites)
{
    Building.x = global.roomWidth-375;//set the current position on screen
    Building.y = global.roomHeight/2;
    Building.depth = 2;
    ref = string(global.objectRef); //set the ref variable to the current objectRef (instance number)
    Name = "Location"+ref; //sets "Location+currentID" to the name varia
}
ini_open(global.locationINI);//opens the ini file
locationEventNumber = ini_read_real(Name,"Number of Events",0);//reads the number of events
global.locationMyth = ini_read_real(Name,"Mythical",2);//reads the mythical status
if(room != RoomSprites)
global.buildingSprite = ini_read_real(Name,"SpriteRef",-1);//reads the sprite for the location
ini_close();//close the ini file

//the following code is used to check all events (if they exist) and see what the mythical status will be for the location itself (based on all events held in that location)
if(locationEventNumber &gt; 0)//checks the number of events
{
    //these are set to default to be used later when reading all events mythical status
    tempNormMap = 0;//set temp normal map to 0 (false)
    tempMythMap = 0;//set temp mythical map to 0 (false)
    for(i = 0; i &lt;= locationEventNumber; i++)//go through each events
    {

        tempEventID = string(i);//create a string of the event id based on the iteration (i) 
        tempEvent = "Event"+tempEventID+"Type";//creates the tempEvent variable for use when accessing the events information from the location ini
        ini_open(global.locationINI);//opens the location ini
        yearWeekCheckName = "Event"+string(i);
        year = ini_read_real(Name,yearWeekCheckName+"Year",0);
        week = ini_read_real(Name,yearWeekCheckName+"Week",0);
        tempEventRef = ini_read_real(Name, tempEvent, 3);//reads the current events reference from the location ini
        ini_close();//closes the location ini
        if(year == global.year and week == global.week)
        {
            s = string(tempEventRef)//uses the reference set above and creates a string of it
            tempEventName = "Event"+s;//uses the string to create the event name "Event"+*string*, set above in s
            ini_open(global.cardEventINI);//opens the event ini
            tempMyth = ini_read_real(tempEventName, "Mythical", 3);//reads the mythical status of the event, set above in tempEventName
            ini_close();//closes the event ini
            switch(tempMyth)//checks the events mythical statsus, changes the tempNormMap and tempMythMap variables accordingly
            {
                case 0: tempNormMap = 1;
                break;
                case 1: tempMythMap = 1;
                break;
                case 2: tempNormMap = 1;
                        tempMythMap = 1;
                default: 
                break;
            }
        }
    }
    //after running the for loop, it checks the events mythical status data that was collected (if any were in normal, mythical or both)
    if(tempNormMap == 1 and tempMythMap == 1)
    {
        global.locationMyth = 2;
    }
    if(tempNormMap == 0 and tempMythMap == 1)
    {
        global.locationMyth = 1;
    }
    if(tempNormMap == 1 and tempMythMap == 0)
    {
        global.locationMyth = 0
    }
    ini_open(global.locationINI);//reopens the ini file
    ini_write_real(Name,"Mythical",global.locationMyth); //sets the new mythical status
    ini_close();
}
else
{
    if(room != RoomSprites)
    {
        //if there are no events
        global.locationMyth = 3;//set the locations mytical status to 2 (both)
        ini_open(global.locationINI);//open the ini file
        ini_write_real(Name,"Mythical",global.locationMyth);//rewrite the mythical status to the ini file
        ini_close();
    }
    else
    {
        global.locationMyth = 0;//
    }
}
if(global.buildingSprite == -1)
{
    if (global.locationMyth == 0)
    {
         sprite_index = BuildingSpriteNormal;
    }
    else if (global.locationMyth == 1)
    {
        sprite_index = BuildingSpriteMythical;
    }
     else if (global.locationMyth == 2)
    {
        sprite_index = BuildingSpriteBoth;
    }
    else if(global.locationMyth == 3)
    {
        sprite_index = BuildingSpriteBoth;
    }
}
else
{
    for(i = 0; i &lt; global.totalNormBuildingSprites; i++)
    {
        if(global.buildingSprite == i)
        {
            image_angle = 0;//angle of the building
            if (global.locationMyth == 0)
            {
                 sprite_index = global.normBuildingArray[i];
    
            }
            else if (global.locationMyth == 1)
            {
                sprite_index = global.mythBuildingArray[i];
            }
             else if (global.locationMyth == 2)
            {
                sprite_index = global.bothBuildingArray[i];
            }
            else if(global.locationMyth == 3)
            {
                sprite_index = BuildingSpriteBoth;
            }
        }
        
    }
}


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//This object is the buildings object, it will instance out to each building and the code above will occur when 
//any instance is RIGHT-clicked 
if(room == RoomMap)
{
    if(global.moveLock == 0)//if the map screen hasnt been moved since the player pressed left button (or tap) down on the map
    { 
        for(t = 0; t &lt; global.TotalInstanceNum; t++) //runs for loop based on TotalInstanceNum (of buildings)
        {
            ini_open(global.locationINI);//opens the ini file
            currRef = string(t); //sets temp id to be a string of the current number of the loop
            locationName = "Location"+currRef; //sets locationname to the current instnace in the loop
            
            if(id.x == ini_read_real(locationName,"X",0) &amp;&amp; id.y == ini_read_real(locationName,"Y",0))//checks what location you are selecting, it checks the x/y vs the instance (id) x/y
            {
                global.tempNum = ini_read_real(locationName,"NumRef",0);//reads the location's ref to the global tempNum (used on locationadd screen)
                global.BGRef = ini_read_real(locationName,"Background",-1);
                if(global.BGRef != -1)
                    room_set_background(RoomLocationAdd, 0, 1, 0, global.locationBGArray[global.BGRef], 0, 0, 0, 0, 0, 0, 1); 
                else
                    room_set_background(RoomLocationAdd, 0, 1, 0, EventCreation_Background, 0, 0, 0, 0, 0, 0, 1); 
                
                ini_close();//closes the ini file
                global.locationWeekabc = 0;
                room = RoomLocationAdd//moves to the next room
            }
        }
    }
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(room == RoomLocationAdd)
{
    draw_set_halign(fa_center);//sets the horizontal allignment for the text
    draw_set_valign(fa_middle);//sets the vertical allignment for the text
    draw_text(global.roomWidth/5*3, global.roomHeight/8+86,"Building Image");//draws the text "location Image"
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
